Reading recorded data
#####################

Syntalos will store all data recorded with it in a defined directory structure, called "**EDL**" (Experiment Directory Layout).

Data can be read manually without specialized tools, but to make things easier we also provide the
`edlio <https://github.com/bothlab/edlio>`_ Python module which can load EDL directories and also apply any timestamps
stored in binary tsync files to their respective data automatically. You can install it via pip: ``pip install edlio``.

If you just want to convert any *tsync* binary files to their text representations, the **syntalos-metaview** command-line
tool can help you with that.

.. figure:: /graphics/edl-files-tree.avif
  :width: 280

  An EDL directory tree as generated by Syntalos

Reading EDL data with ``edlio`` and Python
==========================================

The ``edlio`` module is a versatile Python module for loading EDL data from Python.
Video data will be loaded using OpenCV, while it will use Neo to load electrophysiology formats.
You can install it from PyPI: ``pip install edlio``

More information is available in the `edlio documentation <https://edl.readthedocs.io>`_.
The documentation also contains `example code <https://edl.readthedocs.io/en/latest/examples.html>`_ on
how to read data with the Python module in the most common scenarios.


Reading recorded data without ``edlio``
=======================================

Data stored with Syntalos is just files. You can load them with a text editor, video player, data viewer, etc.
without any specialized tools. This will be slightly less convenient, but should not be difficult to implement
for your own data management workflow.

The `TOML <https://en.wikipedia.org/wiki/TOML>`_ metadata files can also be read easily from
`many languages <https://github.com/toml-lang/toml/wiki>`_, for example Python supports reading the
data natively `via tomllib <https://docs.python.org/3/library/tomllib.html>`_ and has
`tomlkit <https://github.com/sdispater/tomlkit>`_ for more advanced reading & writing,
while a MATLAB toolbox `is available as well <https://github.com/g-s-k/matlab-toml>`_.

Using this, you can read EDL metadata from any language and in any way you like.


Convert tsync files to text
===========================

Syntalos' tsync files can be read using the ``edlio`` Python module and can be converted into metadata and
NumPy matrices for further processing.
This is the best way to use them.

However, if you just want to quickly transform the binary data into its textual representation,
you can also use the ``syntalos-metaview`` command-line tool:

*If you installed Syntalos from source/package:*

.. code-block:: bash

    syntalos-metaview --tsync /path/to/your/tsync-file.tsync

*If you installed Syntalos from the software store:*

.. code-block:: bash

    flatpak run --command=syntalos-metaview io.github.bothlab.syntalos --tsync /path/to/your/tsync-file.tsync

The tool will then print a CSV-like representation of the data, preceded by the metadata the tsync file contains.
